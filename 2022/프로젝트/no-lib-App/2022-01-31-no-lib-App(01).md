---
date: '2022-01-31'
title: 'ë¼ì´ë¸ŒëŸ¬ë¦¬, í”„ë ˆì„ì›Œí¬ ì—†ì´ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë§Œë“¤ê¸° (1) - ê°œë°œí™˜ê²½ ì„¸íŒ…'
categories: ['Project']
---

# âœ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬, í”„ë ˆì„ì›Œí¬ ì—†ì´ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë§Œë“¤ê¸° (1)

## ê°œë°œí™˜ê²½ ì„¸íŒ… (Webpack & TypeScript)

<div>
  <h3 style="font-weight: 700">ëª©ì°¨</h3>
  <a href="#setting--lib">1. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜</a>&nbsp;&nbsp;
  <a href="#setting--webpack-config">2. webpack.config.js ì‘ì„±</a>&nbsp;&nbsp;
  <a href="#setting--ts-config">3. tsconfig.json ì‘ì„±</a>&nbsp;&nbsp;
  <a href="#setting--init-files">4. ì´ˆê¸°ì— í•„ìš”í•œ íŒŒì¼ë“¤ ì‘ì„±</a>&nbsp;&nbsp;
  <hr/>
</div>

<h3 id="setting--lib">1. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜</h3>

```bash
# package.json ìƒì„± (-yë¥¼ ì‚¬ìš©í•˜ì—¬ ë°”ë¡œ ìƒì„±)
npm init -y

# typescript, sass
npm i -D typescript sass

# babel
npm i -D @babel/core @babel/preset-env

# webpack
npm i -D webpack webpack-cli

# webpack devserver
npm i -D webpack-dev-server

# webpack plugins
npm i -D html-webpack-plugin clean-webpack-plugin
npm i -D --save-exact mini-css-extract-plugin@2.4.5

# webpack loaders
npm i -D babel-loader ts-loader file-loader
npm i -D style-loader css-loader sass-loader

# @types
npm i -D @types/webpack
```

**ë¼ì´ë¸ŒëŸ¬ë¦¬ ê´€ë ¨ ì„¤ëª… (ì¼ë¶€)**

- `@babel/preset-env`: ES6ì´ìƒìœ¼ë¡œ ì‘ì„±ëœ ì½”ë“œë¥¼ ë³€í™˜í•  ë•Œ ì‚¬ìš©ë¨.
- **babel**ì—ì„œ preset ì´ ë­ì§€?  
  ë°”ë²¨ì€ js íŒŒì¼ì„ ì…ë ¥ ë°›ì•„ ë³€í™˜í•˜ì—¬ ê²°ê³¼ë¬¼ jsíŒŒì¼ì„ ì¶œë ¥í•œë‹¤.  
  ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ë³€í™˜í•´ì£¼ëŠ” ì‘ì—…ì€ í”ŒëŸ¬ê·¸ì¸ ë‹¨ìœ„ë¡œ ì´ë£¨ì–´ì§„ë‹¤.  
  í•˜ë‚˜ì˜ ê²°ê³¼ë¬¼ì„ ìœ„í•´ ì—¬ëŸ¬ê°œì˜ í”ŒëŸ¬ê·¸ì¸ì„ í™œìš©í•˜ì—¬ ì—¬ëŸ¬ë²ˆì˜ ë³€í™˜ê³¼ì •ì„ ê±°ì¹œë‹¤.  
  ì´ëŸ¬í•œ í”ŒëŸ¬ê·¸ì¸ì˜ ì§‘í•©ì„ presetì´ë¼ ì¹­í•œë‹¤.

**ì°¸ê³ **

- `mini-css-extract-plugin` ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” í˜„ì¬ `2.5.0` ë²„ì „ì€ ì˜¤ë¥˜ê°€ ìˆìŒ. (**[ì°¸ê³ ](https://exerror.com/typeerror-minicssextractplugin-is-not-a-constructor/)**)  
   ğŸ‘‰ `2.4.5` ë²„ì „ì„ ì„¤ì¹˜í•¨ìœ¼ë¡œì¨ í•´ê²°.

<h3 id="setting--webpack-config">2. webpack.config.js ì‘ì„±</h3>

```js
const path = require('path');
const getAbsolutePath = (target) => path.resolve(__dirname, target);

const HtmlWebpackPlugin = require('html-webpack-plugin');
const MiniCssExtractPlugin = require('mini-css-extract-plugin');
const { CleanWebpackPlugin } = require('clean-webpack-plugin');

// -------

const mode = process.env.NODE_ENV || 'development';
const isDevMode = mode === 'development';

/*
    eval-source-map: ê³ í’ˆì§ˆ ì†ŒìŠ¤ë§µì„ í¬í•¨í•œ ê°œë°œ ë¹Œë“œë¥¼ ìœ„í•œ ì˜µì…˜
    hidden-source-map: ì°¸ì¡°ê°€ ì—†ìœ¼ë©°, ì—ëŸ¬ ë³´ê³  ëª©ì ìœ¼ë¡œ ì†ŒìŠ¤ë§µì„ ì‚¬ìš©í•  ë•Œ ì„ íƒ.
*/
const devtool = isDevMode ? 'eval-source-map' : 'hidden-source-map';
const entry = {
  app: path.join(__dirname, 'src', 'index.ts'),
};
const output = {
  filename: '[name].js',
  path: path.resolve(__dirname, 'dist'),
};

const resolve = {
  modules: ['node_modules'],
  extensions: ['.tsx', '.jsx', '.ts', '.js'],
  alias: {
    '@src': getAbsolutePath('src'),
    '@public': getAbsolutePath('public'),
    '@common': getAbsolutePath('../common'),
  },
};

const plugins = [
  new HtmlWebpackPlugin({
    template: path.join(__dirname, './public/index.html'),
    // ë²ˆë“¤ë§ëœ HTML íŒŒì¼ì—ì„œ ê³µë°±ì´ ì œê±°ë˜ê³  ì£¼ì„ì´ ì‚­ì œë¨
    minify:
      process.env.NODE_ENV === 'production'
        ? {
            collapseWhitespace: true,
            removeComments: true,
          }
        : false,
    hash: true, // ì •ì  íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¬ ë•Œ ì¿¼ë¦¬ë¬¸ìì—´ì— ì›¹íŒ© í•´ì‰¬ê°’ì„ ì¶”ê°€.
  }),
  new MiniCssExtractPlugin(),
  new CleanWebpackPlugin(),
];

const webpackModule = {
  rules: [
    {
      test: /\\.jsx?$/,
      exclude: /node_module/,
      loader: 'babel-loader',
      options: {
        presets: ['@babel/preset-env'],
      },
    },
    {
      test: /\\.tsx?$/,
      exclude: /node_module/,
      loader: 'ts-loader',
    },
    {
      test: /\\.s[ac]ss$/i,
      exclude: /node_module/,
      use: [isDevMode ? 'style-loader' : MiniCssExtractPlugin.loader, 'css-loader', 'sass-loader'],
    },
    {
      test: /\\.(webp|jpe?g|png|gif|svg)$/i,
      exclude: /node_module/,
      use: { loader: 'file-loader' },
    },
  ],
};

const devServer = {
  hot: true, // í•« ëª¨ë“ˆ ë¦¬í”Œë ˆì´ìŠ¤ë¨¼íŠ¸
  port: 3000,
  open: true, // ê°œë°œ ì„œë²„ ì‹¤í–‰ ì‹œ, ë¸Œë¼ìš°ì € ì°½ open
  historyApiFallback: true, // íˆìŠ¤í† ë¦¬ APIë¥¼ ì‚¬ìš©í•˜ëŠ” SPA ê°œë°œì‹œ ì„¤ì •. 404ê°€ ë°œìƒí•˜ë©´ index.htmlë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
  client: {
    overlay: true, // ì»´íŒŒì¼ëŸ¬ ì˜¤ë¥˜ ìˆì„ ì‹œ ë¸Œë¼ìš°ì € í™”ë©´ì— í‘œì‹œ
  },
  proxy: {
    '/api': 'http://localhost:4000',
  },
};

// ====================================================================================================

module.exports = {
  mode,
  devtool,
  entry,
  output,
  resolve,
  plugins,
  module: webpackModule,
  devServer: isDevMode ? devServer : {},
};
```

- webpack dev Serverì˜ ê²½ìš° Production ëª¨ë“œì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
  - *production Mode*ì—ì„œ ì“°ì´ëŠ” devServer ì˜µì…˜ì´ ìˆë‹¤ëŠ”ë°, ì•„ì§ ì°¾ì§€ ëª»í•˜ê³  ìˆìŒ
- ë¹Œë“œëœ ê²°ê³¼ë¬¼ì—ì„œ jsì— cssë¥¼ í¬í•¨í•˜ì§€ ì•Šê¸° ìœ„í•´ css íŒŒì¼ì„ í¬í•¨í•˜ì§€ ì•Šê¸° ìœ„í•´ `MiniCssExtractPlugin` ì‚¬ìš©
  - *development Mode*ì—ì„œëŠ” **style-loader**, *production Mode*ëŠ” **MiniCssExtractPlugin**.loader ì‚¬ìš©
- ê°œë°œ ì‹œ, ì ˆëŒ€ ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ **resolve.alias** ì„¤ì •
  - ì´ íŒŒì¼ì€ ë¬¼ë¡ , `tsconfig.json` íŒŒì¼ì—ë„ ë“±ë¡í•´ë‘¬ì•¼ ì •ìƒì‘ë™.

<h3 id="setting--ts-config">3. tsconfig.json ì‘ì„±</h3>

```json
{
  "compilerOptions": {
    /* ECMA Script ë²„ì „ì„ 'ES3'(ê¸°ë³¸ê°’), 'ES5', 'ES2015', 'ES2016', 'ES2017', 'ES2019', 'ES2021' ë˜ëŠ” 'ESNEXT'ë¡œ ì§€ì •í•©ë‹ˆë‹¤.  */
    "target": "es6",

    /* ëª¨ë“ˆì„ ìœ„í•œ ì½”ë“œ ìƒì„± ì„¤ì •: 'none', 'commonjs', 'amd', 'system', 'umd', 'es2015', 'es2020', or 'ESNext'. */
    "module": "esnext",

    /* JSX ì½”ë“œ ìƒì„± ì„¤ì •: 'preserve', 'react-native', í˜¹ì€ 'react'. */
    // "jsx": "react",

    /* '.map' íŒŒì¼ ìƒì„± ì—¬ë¶€. */
    "sourceMap": true,

    /* í•´ë‹¹ ë””ë ‰í† ë¦¬ë¡œ ê²°ê³¼ êµ¬ì¡°ë¥¼ ë³´ëƒ…ë‹ˆë‹¤. */
    "outDir": "./dist/",

    /* 'any' íƒ€ì…ìœ¼ë¡œ êµ¬í˜„ëœ í‘œí˜„ì‹ í˜¹ì€ ì •ì˜ ì—ëŸ¬ì²˜ë¦¬ ì—¬ë¶€ */
    "noImplicitAny": true,

    /* ì»´íŒŒì¼ì— í¬í•¨ë  ë¼ì´ë¸ŒëŸ¬ë¦¬ íŒŒì¼ ëª©ë¡ */
    "lib": ["dom", "DOM.Iterable", "ESNext"],

    /* ì •ì˜ íŒŒì¼ì˜ íƒ€ì… í™•ì¸ì„ ê±´ë„ˆ ë›¸ ì§€ ì—¬ë¶€ */
    "skipLibCheck": true,

    /* default exportì´ ì•„ë‹Œ ëª¨ë“ˆì—ì„œë„ default importê°€ ê°€ëŠ¥í•˜ê²Œ í•  ì§€ ì—¬ë¶€, í•´ë‹¹ ì„¤ì •ì€ ì½”ë“œ ì¶”ì¶œì— ì˜í–¥ì€ ì£¼ì§€ ì•Šê³ , íƒ€ì…í™•ì¸ì—ë§Œ ì˜í–¥ì„ ì¤ë‹ˆë‹¤. */
    "allowSyntheticDefaultImports": true,

    /* ëª¨ë“  ì—„ê²©í•œ íƒ€ì…-ì²´í‚¹ ì˜µì…˜ í™œì„±í™” ì—¬ë¶€ */
    "strict": true,

    /* switchë¬¸ì—ì„œ fallthrough ì¼€ì´ìŠ¤ì— ëŒ€í•œ ì—ëŸ¬ë³´ê³  ì—¬ë¶€ */
    "noFallthroughCasesInSwitch": true,

    /* ê°™ì€ íŒŒì¼ì— ëŒ€í•œ ì¼ê´€ë˜ì§€ ì•Šì€ ì°¸ì¡°ë¥¼ í—ˆìš©í•˜ì§€ ì•Šì„ ì§€ ì—¬ë¶€ */
    "forceConsistentCasingInFileNames": true,

    /* ê° íŒŒì¼ì„ ë¶„ë¦¬ëœ ëª¨ë“ˆë¡œ íŠ¸ëœìŠ¤íŒŒì¼ ('ts.transpileModule'ê³¼ ë¹„ìŠ·í•©ë‹ˆë‹¤). */
    "isolatedModules": true,

    /* ëª¨ë“ˆ í•´ì„ ë°©ë²• ì„¤ì •: 'node' (Node.js) í˜¹ì€ 'classic' (TypeScript pre-1.6). */
    "moduleResolution": "node",

    /*  TypeScriptëŠ” ê¸°ë³¸ì ìœ¼ë¡œ JSON íŒŒì¼ í™•ì¸ì„ ì§€ì›í•˜ì§€ ì•ŠìŒ, ì´ ì˜µì…˜ì„ trueë¡œ ë³€ê²½í•˜ë©´ ì§€ì› ê°€ëŠ¥í•¨. */
    "resolveJsonModule": true,

    /* ëª¨ë“  importsì— ëŒ€í•œ namespace ìƒì„±ì„ í†µí•´ CommonJSì™€ ES Modules ê°„ì˜ ìƒí˜¸ ìš´ìš©ì„±ì´ ìƒê¸°ê²Œí•  ì§€ ì—¬ë¶€, 'allowSyntheticDefaultImports'ë¥¼ ì•”ì‹œì ìœ¼ë¡œ ìŠ¹ì¸í•©ë‹ˆë‹¤. */
    "esModuleInterop": true,

    /* ê²°ê³¼ íŒŒì¼ ë‚´ë³´ë‚¼ì§€ ì—¬ë¶€ (ì´ê±° trueí•˜ë©´ webpack serve ì‘ë™ ë¶ˆê°€) */
    "noEmit": false,

    /* ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ì»´íŒŒì¼ í—ˆìš© ì—¬ë¶€ */
    "allowJs": true,

    /* non-absoluteí•œ ëª¨ë“ˆ ì´ë¦„ì„ ì²˜ë¦¬í•  ê¸°ì¤€ ë””ë ‰í† ë¦¬ */
    "baseUrl": "./",
    /* 'baseUrl'ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¬ ëª¨ë“ˆì˜ ìœ„ì¹˜ë¥¼ ì¬ì§€ì •í•˜ëŠ” ì—”íŠ¸ë¦¬ ì‹œë¦¬ì¦ˆ */
    "paths": { "@src/*": ["src/*"], "@public/*": ["public/*"], "@common/*": ["../common/*"] }
  },

  "include": ["src/**/*"],
  "exclude": ["node_modules/"]
}
```

- `tsc â€”init` ìœ¼ë¡œ ìƒì„±í•´ì„œ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ì˜µì…˜ë§Œ ì„ íƒí•´ë„ ë¨

<h3 id="setting--init-files">4. ì´ˆê¸°ì— í•„ìš”í•œ íŒŒì¼ë“¤ ì‘ì„±</h3>

`./public/index.html`

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!-- <link rel="icon" href="%PUBLIC_URL%/favicon.ico" /> -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <title>Board</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>
```

`./src/core/Component.ts`

```tsx
import CustomError from './CustomError';

class Component {
  constructor(public readonly $target: Element | null) {
    this.init();
  }
  protected init(): void {}
}

export default Component;
```

`./src/index.ts`

```tsx
import App from './App';
import './index.scss';

new App(document.querySelector('#root'));
```

`./src/App.ts`

```tsx
import Component from './core/Component';

class App extends Component {
  /* dosomething... */
}

export default App;
```